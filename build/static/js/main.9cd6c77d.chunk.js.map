{"version":3,"sources":["hooks/index.js","hooks/priceHooks.js","constants.js","components/StocksList.js","components/Menu.js","components/StockForm.js","components/StockDetails.js","components/Summary.js","components/Settings.js","App.js","reportWebVitals.js","index.js"],"names":["hookFromSubject","subject","callback","useState","getValue","value","setValue","useEffect","subscription","subscribe","unsubscribe","useSubject","savedPrices","savedPricesString","localStorage","getItem","JSON","parse","e","console","error","pricesSubject","BehaviorSubject","usePrices","getPrices","stocks","stocksSubject","length","symbols","forEach","item","symbol","fetch","Request","Object","keys","join","Date","getTime","then","response","a","json","prices","next","setItem","stringify","catch","priceSubject","usePrice","getPrice","savedCurrencyRates","savedCurrencyRatesString","currencyRatesSubject","savedStocks","savedStocksString","useStocks","DEFAULT_CURRENCY","StockList","onPageChange","totalGain","gainSum","price","payed","buyPrice","amount","transactionFee","gain","preMarketPrice","postMarketPrice","calculateTotalGain","now","moment","openMoment","tz","format","closeMoment","nextIsOpen","isBefore","nextIsClose","timeToOpen","diff","timeToOpenM","timeToClose","timeToCloseM","className","mode","leftContent","size","onClick","rightContent","toFixed","map","index","outMarketPrice","sellPrice","difOne","dif","Header","title","currency","extra","Body","Footer","content","Menu","Item","createForm","props","values","onSubmit","onCancel","form","getFieldProps","getFieldError","onSymbolBlur","getFieldValue","placeholder","initialValue","rules","required","message","onChange","uppercase","toUpperCase","setFieldsValue","onErrorClick","Toast","info","name","type","inline","style","marginLeft","disabled","validateFields","getFieldsValue","StockDetails","goBack","confirm","tmp","splice","undefined","Summary","grouped","payedSum","table","push","Settings","App","currencyRates","page","setPage","pageProps","setPageProps","componentName","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9cd6c77d.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nexport const useSubject = (subject, callback) => {\r\n  const [value, setValue] = useState((subject && subject.getValue) ? subject.getValue() : null);\r\n  useEffect(() => {\r\n    const subscription = subject.subscribe((value) => {\r\n      setValue(value);\r\n      !!callback && callback(value);\r\n    });\r\n    return () => subscription.unsubscribe();\r\n  }, [subject]);\r\n  return value;\r\n};\r\n\r\nexport const hookFromSubject = (subject) => () => useSubject(subject);\r\n","import { BehaviorSubject } from \"rxjs\";\r\nimport { hookFromSubject } from \"./index\";\r\n\r\nlet savedPrices = {};\r\nconst savedPricesString = localStorage.getItem('prices');\r\nif (savedPricesString) {\r\n  try {\r\n    savedPrices = JSON.parse(savedPricesString);\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n}\r\n\r\nexport const pricesSubject = new BehaviorSubject(savedPrices);\r\nexport const usePrices = hookFromSubject(pricesSubject);\r\nexport const getPrices = () => {\r\n  const stocks = stocksSubject.getValue();\r\n  if (stocks.length) {\r\n    const symbols = {};\r\n    stocks.forEach(item => {\r\n      symbols[item.symbol] = true;\r\n    });\r\n    return fetch(new Request('/api/prices/' + Object.keys(symbols).join(',') + '?t=' + new Date().getTime()))\r\n      .then(async (response) => {\r\n        try {\r\n          const prices = await response.json();\r\n          pricesSubject.next(prices);\r\n          localStorage.setItem('prices', JSON.stringify(prices));\r\n        } catch (e) {\r\n          console.error(e);\r\n        }\r\n      }).catch(console.error);\r\n  }\r\n};\r\n\r\nexport const priceSubject = new BehaviorSubject(null);\r\nexport const usePrice = hookFromSubject(priceSubject);\r\nexport const getPrice = (symbol) => {\r\n  if (symbol) {\r\n    priceSubject.next(null);\r\n    return fetch(new Request('/api/prices/' + symbol + '?t=' + new Date().getTime())).then(async (response) => {\r\n      try {\r\n        const prices = await response.json();\r\n        priceSubject.next(prices[symbol]);\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n    }).catch(console.error);\r\n  }\r\n};\r\n\r\nlet savedCurrencyRates = null;\r\nconst savedCurrencyRatesString = localStorage.getItem('currencyRates');\r\nif (savedCurrencyRatesString) {\r\n  try {\r\n    savedCurrencyRates = JSON.parse(savedCurrencyRatesString);\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n}\r\n\r\nexport const currencyRatesSubject = new BehaviorSubject(savedCurrencyRates);\r\nexport const useCurrencyRates = hookFromSubject(currencyRatesSubject);\r\nexport const getCurrencyRates = () => {\r\n  return fetch(new Request('/api/currencyRates')).then(async (response) => {\r\n    try {\r\n      const currencyRates = await response.json();\r\n      currencyRatesSubject.next(currencyRates);\r\n      localStorage.setItem('currencyRates', JSON.stringify(currencyRates));\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  }).catch(console.error);\r\n};\r\n\r\nlet savedStocks = [];\r\nconst savedStocksString = localStorage.getItem('stocks');\r\nif (savedStocksString) {\r\n  try {\r\n    savedStocks = JSON.parse(savedStocksString);\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n}\r\nexport const stocksSubject = new BehaviorSubject(savedStocks);\r\nexport const useStocks = hookFromSubject(stocksSubject);\r\nstocksSubject.subscribe(stocks => {\r\n  localStorage.setItem('stocks', JSON.stringify(stocks));\r\n});\r\n\r\nexport const convertCurrency = (value, currencyFrom, currencyTo) => {\r\n  const currency = currencyRatesSubject.getValue();\r\n  if (!currency) {\r\n    return value;\r\n  }\r\n  const valueBase = value / currency.rates[currencyFrom];\r\n  return valueBase * currency.rates[currencyTo];\r\n};\r\n\r\n\r\nexport const calculateTotalGain = (stocks, prices) => {\r\n  let gainSum = 0;\r\n  (stocks || []).forEach(item => {\r\n    if (item && prices && prices[item.symbol]) {\r\n      const price = prices[item.symbol];\r\n      const payed = (+item.buyPrice) * (+item.amount) + (+item.transactionFee || 0);\r\n      const gain = ((price.preMarketPrice || price.postMarketPrice || +price.value) * (+item.amount) - (+item.transactionFee || 0)) - payed;\r\n      gainSum += gain;\r\n    }\r\n  });\r\n  return gainSum;\r\n};\r\n","export const DEFAULT_CURRENCY = 'USD';\r\n","import React from \"react\";\r\nimport { Card, NavBar, WhiteSpace, WingBlank } from \"antd-mobile\";\r\nimport { AiOutlineMenu, AiOutlinePlus } from \"react-icons/ai\";\r\nimport { calculateTotalGain, usePrices, useStocks } from \"../hooks/priceHooks\";\r\nimport { DEFAULT_CURRENCY } from \"../constants\";\r\nimport moment from 'moment-timezone';\r\n\r\nconst openTime = \"09:30:00\";\r\nconst closeTime = \"16:00:00\";\r\n\r\nfunction StockList({ onPageChange }) {\r\n\r\n  const stocks = useStocks();\r\n  const prices = usePrices();\r\n\r\n  const totalGain = calculateTotalGain(stocks, prices);\r\n\r\n  const now = moment();\r\n  const openMoment = moment.tz(now.format('YYYY-MM-DD') + 'T' + openTime, 'America/New_York');\r\n  const closeMoment = moment.tz(now.format('YYYY-MM-DD') + 'T' + closeTime, 'America/New_York');\r\n  let nextIsOpen = now.isBefore(openMoment);\r\n  let nextIsClose = now.isBefore(closeMoment);\r\n  const timeToOpen = openMoment.diff(now, 'hour');\r\n  const timeToOpenM = openMoment.diff(now, 'minute');\r\n  const timeToClose = closeMoment.diff(now, 'hour');\r\n  const timeToCloseM = closeMoment.diff(now, 'minute');\r\n\r\n  return (\r\n    <div className=\"StockList\">\r\n      <NavBar key={'top'}\r\n              mode=\"dark\"\r\n              className={'top-bar'}\r\n              leftContent={[\r\n                <AiOutlineMenu size={24} key={'menu'} onClick={() => onPageChange('Menu')}/>\r\n              ]}\r\n              rightContent={[\r\n                <AiOutlinePlus size={24} key={'plus'} onClick={() => onPageChange('StockDetails')}/>\r\n              ]}\r\n      >stonks</NavBar>\r\n      <NavBar key={'bottom'}\r\n              mode=\"light\"\r\n              className={'bottom-bar'}\r\n              leftContent={[\r\n                nextIsOpen\r\n                  ? <div key={'open'} className={'text-gray'}>\r\n                    opens in {timeToOpen}h {timeToOpenM % 60}m\r\n                  </div>\r\n                  : nextIsClose ? <div key={'close'} className={'text-gray'}>\r\n                    closes in {timeToClose}h {timeToCloseM % 60}m\r\n                  </div>\r\n                  : ''\r\n              ]}\r\n              rightContent={[\r\n                <div key={'gain'} className={'text-right ' + (totalGain > 0 ? 'gain' : 'lose')}>\r\n                  {totalGain > 0 ? '+' : ''}{totalGain.toFixed(2)} {DEFAULT_CURRENCY}\r\n                </div>\r\n              ]}\r\n      />\r\n\r\n      <WingBlank size=\"lg\">\r\n        <WhiteSpace size=\"lg\"/>\r\n        {!!prices && (stocks || []).map((item, index) => {\r\n          const price = prices[item.symbol] || {};\r\n          const preMarketPrice = price.preMarketPrice || 0;\r\n          const postMarketPrice = price.postMarketPrice || 0;\r\n          const outMarketPrice = preMarketPrice || postMarketPrice;\r\n          const value = outMarketPrice || price.value || 0;\r\n          const buyPrice = +item.amount * +item.buyPrice + (+item.transactionFee || 0);\r\n          const sellPrice = +item.amount * +value - (+item.transactionFee || 0);\r\n          const difOne = +value - +item.buyPrice;\r\n          const dif = sellPrice - buyPrice;\r\n          return !!prices[item.symbol] && <div key={index}>\r\n            <Card onClick={() => onPageChange('StockDetails', { item, index })}>\r\n              <Card.Header\r\n                title={<>{item.symbol} {!outMarketPrice && value.toFixed(2)} {!!outMarketPrice &&\r\n                <span className={'market-price'}>{value.toFixed(2)}</span>}{price.currency}</>}\r\n                extra={<span>{item.amount}</span>}\r\n              />\r\n              <Card.Body>\r\n                <div className={'pull-right ' + (dif > 0 ? 'gain' : 'lose')}>\r\n                  {dif > 0 ? '+' : ''}{dif.toFixed(2)} {price.currency}\r\n                </div>\r\n                <div className={difOne > 0 ? 'gain' : 'lose'}>\r\n                  {difOne > 0 ? '+' : ''}{difOne.toFixed(2)} {price.currency} {difOne > 0 ? '+' : ''}{(100 * difOne / (+item.buyPrice || 1)).toFixed(2)}%\r\n                </div>\r\n              </Card.Body>\r\n              <Card.Footer content={`payed ${buyPrice.toFixed(2)} ${price.currency}`}\r\n                           extra={<div>{`return ${sellPrice.toFixed(2)} ${price.currency}`}</div>}/>\r\n            </Card>\r\n            <WhiteSpace size=\"lg\"/>\r\n          </div>\r\n        })}\r\n      </WingBlank>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StockList;\r\n","import React from \"react\";\r\nimport { List, NavBar, WhiteSpace } from \"antd-mobile\";\r\nimport { AiOutlineLeft } from \"react-icons/ai\";\r\n\r\nfunction Menu({ onPageChange }) {\r\n\r\n  return (\r\n    <div className=\"Menu\">\r\n      <NavBar\r\n        mode=\"dark\"\r\n        className={'top-bar'}\r\n        leftContent={[\r\n          <AiOutlineLeft size={24} key={'menu'} onClick={() => onPageChange('StockList')}/>\r\n        ]}\r\n      >stonks</NavBar>\r\n\r\n      <WhiteSpace size=\"lg\"/>\r\n      <List className=\"my-list\">\r\n        <List.Item onClick={() => onPageChange('StockList')}>My stonks</List.Item>\r\n        <List.Item onClick={() => onPageChange('Summary')}>Summary</List.Item>\r\n        {/*<List.Item onClick={() => onPageChange('Settings')}>Settings</List.Item>*/}\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Menu;\r\n","import React, { useEffect } from \"react\";\r\nimport { Button, InputItem, List, Toast } from \"antd-mobile\";\r\nimport { createForm } from 'rc-form';\r\nimport { getPrice, usePrice, priceSubject } from \"../hooks/priceHooks\";\r\nimport { DEFAULT_CURRENCY } from \"../constants\";\r\n\r\nfunction StockForm(props) {\r\n\r\n  const { values, onSubmit, onCancel, form } = props;\r\n  const { getFieldProps, getFieldError } = form;\r\n\r\n  useEffect(() => {\r\n    if (values && values.symbol) {\r\n      getPrice(values.symbol).then().catch();\r\n    } else {\r\n      priceSubject.next(null);\r\n    }\r\n  }, [true]);\r\n\r\n  const price = usePrice();\r\n\r\n  const onSymbolChange = (symbol) => {\r\n    const uppercase = symbol.toUpperCase();\r\n    form.setFieldsValue({ symbol: uppercase });\r\n    onSymbolBlur();\r\n  };\r\n\r\n  const onSymbolBlur = () => {\r\n    const symbol = form.getFieldValue('symbol');\r\n    getPrice(symbol).then().catch();\r\n  };\r\n\r\n  return (\r\n    <form>\r\n      <List className=\"my-list\">\r\n        <InputItem placeholder=\"required\" error={!!getFieldError('symbol')}\r\n                   {...getFieldProps('symbol', {\r\n                     initialValue: values.symbol,\r\n                     rules: [\r\n                       { required: true, message: 'Please input symbol' },\r\n                     ],\r\n                   })}\r\n                   onChange={onSymbolChange}\r\n                   onErrorClick={() => {\r\n                     Toast.info(getFieldError('symbol').join('、'));\r\n                   }}\r\n        >Symbol</InputItem>\r\n        <small className={'stock-name-small'}>{price && price.name}</small>\r\n        <InputItem placeholder=\"required\" error={!!getFieldError('amount')}\r\n                   {...getFieldProps('amount', {\r\n                     initialValue: values.amount,\r\n                     rules: [\r\n                       { required: true, message: 'Please input amount' },\r\n                     ],\r\n                   })}\r\n                   type={'number'}\r\n                   onErrorClick={() => {\r\n                     Toast.info(getFieldError('amount').join('、'));\r\n                   }}\r\n        >Amount</InputItem>\r\n        <InputItem placeholder=\"required\" error={!!getFieldError('buyPrice')}\r\n                   {...getFieldProps('buyPrice', {\r\n                     initialValue: values.buyPrice,\r\n                     rules: [\r\n                       { required: true, message: 'Please input buy price' },\r\n                     ],\r\n                   })}\r\n                   type={'digit'} extra={(price && price.currency) || DEFAULT_CURRENCY}\r\n                   onErrorClick={() => {\r\n                     Toast.info(getFieldError('buyPrice').join('、'));\r\n                   }}\r\n        >Buy price</InputItem>\r\n        <InputItem placeholder=\"\"\r\n                   {...getFieldProps('transactionFee', { initialValue: values.transactionFee })}\r\n                   type={'digit'} extra={(price && price.currency) || DEFAULT_CURRENCY}\r\n        >Transaction fee</InputItem>\r\n        <List.Item\r\n          extra={<Button size=\"small\" inline style={{ marginLeft: '0.25rem' }} onClick={onCancel}>Cancel</Button>}>\r\n          <Button type=\"primary\" size=\"small\" inline disabled={!price || !price.value}\r\n                  onClick={() => form.validateFields((error, value) => {\r\n                    if (!error) {\r\n                      onSubmit(form.getFieldsValue());\r\n                    }\r\n                  })}>Save</Button>\r\n        </List.Item>\r\n      </List>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default createForm()(StockForm);\r\n","import React from \"react\";\r\nimport { NavBar, WhiteSpace, WingBlank } from \"antd-mobile\";\r\nimport { AiOutlineDelete, AiOutlineLeft } from \"react-icons/ai\";\r\nimport StockForm from \"./StockForm\";\r\nimport { getPrices, stocksSubject, useStocks } from \"../hooks/priceHooks\";\r\n\r\nfunction StockDetails({ onPageChange, props }) {\r\n\r\n  const stocks = useStocks();\r\n  const { item, index } = props;\r\n\r\n  const goBack = () => onPageChange('StockList');\r\n\r\n  const onSubmit = (values) => {\r\n    if (item) {\r\n      const tmp = [...stocks];\r\n      tmp.splice(index, 1, values);\r\n      stocksSubject.next(tmp);\r\n    } else {\r\n      stocksSubject.next([...stocks, values]);\r\n    }\r\n    getPrices();\r\n    goBack();\r\n  };\r\n\r\n  const onDelete = () => {\r\n    if (item && confirm('Are you sure?')) {\r\n      const tmp = [...stocks];\r\n      tmp.splice(index, 1);\r\n      stocksSubject.next(tmp);\r\n      goBack();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"StockDetails\">\r\n      <NavBar\r\n        mode=\"dark\"\r\n        className={'top-bar'}\r\n        leftContent={[\r\n          <AiOutlineLeft size={24} key={'menu'} onClick={goBack}/>\r\n        ]}\r\n        rightContent={item ? [\r\n          <AiOutlineDelete size={24} key={'menu'} onClick={onDelete}/>\r\n        ] : undefined}\r\n      >stonks</NavBar>\r\n\r\n      <WingBlank size=\"lg\">\r\n        <WhiteSpace size=\"lg\"/>\r\n        <StockForm values={item || {}} onSubmit={onSubmit} onCancel={goBack}/>\r\n      </WingBlank>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StockDetails;\r\n","import React from \"react\";\r\nimport { Flex, NavBar, WhiteSpace, WingBlank } from \"antd-mobile\";\r\nimport { AiOutlineHome } from \"react-icons/ai\";\r\nimport { usePrices, useStocks } from \"../hooks/priceHooks\";\r\nimport { DEFAULT_CURRENCY } from \"../constants\";\r\n\r\nfunction Summary({ onPageChange }) {\r\n\r\n  const stocks = useStocks();\r\n  const prices = usePrices();\r\n  const grouped = {};\r\n  let payedSum = 0;\r\n  let gainSum = 0;\r\n  stocks.forEach(item => {\r\n    if (item && prices && prices[item.symbol]) {\r\n      if (!grouped[item.symbol]) {\r\n        grouped[item.symbol] = {payed: 0, gain: 0};\r\n      }\r\n      const price = prices[item.symbol];\r\n      const payed = (+item.buyPrice) * (+item.amount) + (+item.transactionFee || 0);\r\n      const gain = ((price.preMarketPrice || price.postMarketPrice || +price.value) * (+item.amount) - (+item.transactionFee || 0)) - payed;\r\n      payedSum += payed;\r\n      gainSum += gain;\r\n      grouped[item.symbol].payed += payed;\r\n      grouped[item.symbol].gain += gain;\r\n    }\r\n  });\r\n  const table = [];\r\n  Object.keys(grouped).forEach(symbol => {\r\n    const price = (prices || {})[symbol] || {};\r\n    table.push({ symbol, gain: grouped[symbol].gain, payed: grouped[symbol].payed, currency: price.currency });\r\n  });\r\n  table.push({ symbol: 'Total', gain: gainSum, payed: payedSum, currency: DEFAULT_CURRENCY });\r\n\r\n  return (\r\n    <div className=\"Summary\">\r\n      <NavBar\r\n        mode=\"dark\"\r\n        className={'top-bar'}\r\n        leftContent={[\r\n          <AiOutlineHome size={24} key={'menu'} onClick={() => onPageChange('StockList')}/>\r\n        ]}\r\n      >stonks</NavBar>\r\n\r\n      <WingBlank size=\"lg\">\r\n        <WhiteSpace size=\"lg\"/>\r\n        <Flex>\r\n          <Flex.Item><b>Symbol</b></Flex.Item>\r\n          <Flex.Item><b>Payed</b></Flex.Item>\r\n          <Flex.Item className={'text-right'}><b>Gain</b></Flex.Item>\r\n        </Flex>\r\n        {table.map(item => <div key={item.symbol}>\r\n          <WhiteSpace size=\"lg\"/>\r\n          <Flex>\r\n            <Flex.Item>{item.symbol}</Flex.Item>\r\n            <Flex.Item>{(+item.payed).toFixed(2)} {item.currency}</Flex.Item>\r\n            <Flex.Item className={'text-right ' + (item.gain > 0 ? 'gain' : 'lose')}>\r\n              {+item.gain > 0 ? '+' : ''}{(+item.gain).toFixed(2)} {item.currency}\r\n            </Flex.Item>\r\n          </Flex>\r\n        </div>)}\r\n      </WingBlank>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Summary;\r\n","import React from \"react\";\r\nimport { NavBar, WhiteSpace, WingBlank } from \"antd-mobile\";\r\nimport { AiOutlineHome } from \"react-icons/ai\";\r\n\r\nfunction Settings({ onPageChange }) {\r\n\r\n  return (\r\n    <div className=\"Settings\">\r\n      <NavBar\r\n        mode=\"dark\"\r\n        className={'top-bar'}\r\n        leftContent={[\r\n          <AiOutlineHome size={24} key={'menu'} onClick={() => onPageChange('StockList')}/>\r\n        ]}\r\n      >stonks</NavBar>\r\n\r\n      <WingBlank size=\"lg\">\r\n        <WhiteSpace size=\"lg\"/>\r\n        settings\r\n      </WingBlank>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Settings;\r\n","import React, { useEffect, useState } from \"react\";\nimport { getCurrencyRates, getPrices } from \"./hooks/priceHooks\";\nimport StockList from \"./components/StocksList\";\nimport Menu from \"./components/Menu\";\nimport StockDetails from \"./components/StockDetails\";\nimport Summary from \"./components/Summary\";\nimport Settings from \"./components/Settings\";\n\nfunction App() {\n  useEffect(() => {\n    getPrices();\n    getCurrencyRates();\n  }, [true]);\n\n  const [page, setPage] = useState('StockList');\n  const [pageProps, setPageProps] = useState({});\n\n  const onPageChange = (componentName, props) => {\n    setPage(componentName);\n    setPageProps(props || {});\n  };\n\n  return (\n    <div className=\"App\">\n      {page === 'Menu' && <Menu onPageChange={onPageChange} props={pageProps} />}\n      {page === 'StockList' && <StockList onPageChange={onPageChange} props={pageProps} />}\n      {page === 'StockDetails' && <StockDetails onPageChange={onPageChange} props={pageProps} />}\n      {page === 'Summary' && <Summary onPageChange={onPageChange} props={pageProps} />}\n      {page === 'Settings' && <Settings onPageChange={onPageChange} props={pageProps} />}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd-mobile/dist/antd-mobile.css';\nimport './styles/index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}